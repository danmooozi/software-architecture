# CHAPTER 9 기초

아키텍처 스타일은 종종 아키텍처 패턴이라고도 부르며, 다양한 아키텍처 특성을 다루는 컴포넌트의 명명된 관계를 기술합니다.

## 9.1 기초 패턴

레이어는 기능에 따라 서로 다른 관심사를 분리하는 개념으로, 소프트웨어 자체만큼이나 오래됐습니다.

### 9.1.1 진흙잡탕

뭐 하나 뚜렷한 아키텍처 구조가 전무한 상태를 진흙잡탕이라고 표현합니다.
진흙잡탕은 요즘에는 보통 실제 내부 구조라 할 만한 것은 하나도 없는, 데이터베이스를 직접 호출하는 이벤트 핸들러를 가진 단순한 스크립팅 애플리케이션을 가리킵니다.

### 9.1.2 유니터리 아키텍처

이제 유니터리(단일, 통일) 시스템은 임베디드 시스템과 그 밖에 매우 제약이 많은 극소수 환경을 제외하면 거의 쓰이지 않습니다. 성능, 확장 등의 운영 아키텍처 특성을 유지하려면 관심사를 분리할 필요가 있습니다.

### 9.1.3 클라이언트/서버

프런트엔드와 백엔드로 기술적으로 기능을 분리한 two-tier 또는 클라이언트/서버 아키텍처는 대표적인 기본 아키텍처 스타일입니다.

**데스크톱 + 데이터베이스 서버**

프레젠테이션 로직은 데스크톱에 두고 계산량이 많은 액션은 사양이 탄탄한 데이터베이스 서버에서 실행했습니다.

**브라우저 + 웹 서버**

**3티어**

고성능 데이터베이스 서버를 사용하는 데이터베이스 티어, 애플리케이션 서버가 관리하는 애플리케이션 티어, 프런트엔드 티어, 이렇게 세 티어가 완성됐습니다.

### 9.2 모놀리식 대 분산 아키텍처

아키텍처 스타일은 크게 전체 코드를 단일 단위로 배포하는 모놀리식과 원격 액세스 프로토콜을 통해 여러 단위로 배포하는 분산형, 두 종류입니다.

**모놀리식**
* 레이어드 아키텍처(10장)
* 파이프라인 아키텍처(11장)
* 마이크로커널 아키텍처(12장)

**분산형**
* 서비스 기반 아키텍처(13장)
* 이벤트 기반 아키텍처(14장)
* 공간 기반 아키텍처(15장)
* 서비스 지향 아키텍처(16장)
* 마이크로서비스 아키텍처(17장)

분산 아키텍처 스타일은 모놀리식 아키텍처 스타일에 비해 성능, 확장성, 가용성 측면에서 훨씬 강력하지만, 이런 파워에도 결코 무시할 수 없는 트레이드오프가 수반됩니다.

### 9.2.1 오류#1 네트워크는 믿을 수 있다

개발자, 아키텍트 모두 네트워크는 믿을 수 있다고 전제하지만 실제로는 전혀 그렇지 않습니다. 그래서 타임아웃 같은 장치를 마련하거나, 서비스 사이에 회로 차단기(서킷 브레이커)를 두는 것입니다. 시스템이 네트워크에 더 의존할수록 시스템의 신뢰도는 잠재적으로 떨어질 가능성이 있습니다.

### 9.2.2 오류#2 레이턴시는 0이다

메서드나 함수를 이용해 다른 컴포넌트를 로컬 호출하면 그 소요 시간(t_local)은 대개 나노 초 내지 밀리초 단위로 측정되지만, 동일한 호출을 원격 액세스 프로토콜을 통해서 수행하면 서비스 액세스 시간(t_remote)이 밀리초 단위로 측정됩니다. 여러분은 운영 환경에서 평균 왕복 레이턴시가 얼마나 되는지 알고 있습니까? 레이턴시 값은 대부분 네트워크 관리자에게 물어보면 쉽게 알아낼 수 있습니다.

### 9.2.3 오류#3 대역폭은 무한하다

스탬프 커플링은 다음과 같은 방법으로 해결할 수 있습니다.

* 프라이빗 REST API 엔드포인트를 둔다.
* 계약에 필드 셀렉터를 사용한다.
* GraphQL로 계약을 분리한다.
* 컨슈머 주도 계약과 값주도 계약을 병용한다.
* 내부 메시징 엔드포인트를 사용한다.ㄱ

### 9.2.4 오류#4 네트워크는 안전하다

### 9.2.5 오류#5 토폴로지는 절대 안 바뀐다

네트워크를 구성하는 모든 라우터, 허브, 스위치, 방화벽, 네트워크 ,어플라이언스 등 전체 네트워크 토폴로지가 불변일 거란 가정은 섣부른 오해입니다.

(wynter)SRE에서 한 업데이트로 뭔가 오류가 있었던 적이 예전에 왕왕 있었는데, 그런게 떠오르네요..

### 9.2.6 오류#6 관리자는 한 사람뿐이다

### 9.2.7 오류#7 운송비는 0이다

### 9.2.8 오류#8 네트워크는 균일하다

### 9.2.9 다른 분산 아키텍처 고려 사항

**분산 로깅** 

(wynter) 오 완전 인정.

**분산 트랜잭션**


