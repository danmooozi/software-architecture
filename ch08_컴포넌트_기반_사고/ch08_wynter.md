# CHAPTER7 컴포넌트 기반 사고

## 8.1 컴포넌트 범위

가장 단순한 컴포넌트는 클래스보다 한 단계 높은 수준의 모듈로 코드를 래핑한 것입니다. 이 단순한 래퍼를 보통 라이브러리라고 합니다.

컴포넌트는 아키텍처에서 서브시스템이나 레이어 형태로도 나타나며, 많은 이벤트 프로세서를 위한 배포 가능한 작업 단위입니다.

서비스는 또 다른 종류의 컴포넌트로서 자신의 주소 공간에서 실행되며, TCP/IP와 같은 저수준 네트워크 프로토콜이나 레스트 메시지 큐 같은 고수준 포맷을 통해 통신합니다.

## 8.2 아키텍트 역할

아키텍트는 아키텍처 내부의 컴포넌트를 정의, 개선, 관리, 통제하는 일을 합니다. 하지만 다음 세대 아키텍트들을 위해 클래스 설계나 시스템의 세세한 설계 결정에 간여해서는 안 됩니다.

### 8.2.1 아키텍처 분할

컴포넌트는 일반적인 적재 메커니즘을 의미하므로 아키텍트는 재량껏 어떤 유형의 분할도 할 수 있습니다.

레이어드 아키텍처와 모듈러 아키텍처의 스타일은 서로 다른 방법으로 아키텍처를 최상위 분할한 결과입니다.

기술적 최상위 분할은 레이어드 아키텍처와 같이 기술적인 능력에 따라 아키텍처를 구성하는 것입니다.

서로 다른 아키텍처 패턴 간의 근본적인 차이점 중의 하나가 바로 각각의 개별 패턴을 다루는 최상위 분할의 유형입니다.

### 8.2.2 분할 사례 연구: 실리콘 샌드위치

**도메인 분할**

장점
* 세부 구현보다 비즈니스 기능에 더 가깝게 모델링된다.
* 역 콘웨이 전략을 활용하여 도메인별 다목적팀을 구성하기 쉽다.
* 모듈러 모놀리스와 마이크로서비스 아키텍처 스타일에 더 가깝게 맞출 수 있다.
* 메시지 흐름이 문제 영역과 일치한다.
* 데이터와 컴포넌트를 분산 아키텍처로 옮기기 쉽다.

단점
* 유저 정의 코드가 여기저기 널려 있다.

**기술 분할**

장점
* 커스텀 코드가 명확하게 분리된다.
* 레이어드 아키텍처 패턴에 더 가깝게 맞출 수 있다.

단점
* 전역 커플링이 더 높다. 따라서 공통 또는 로컬 컴포넌트 중 하나라도 변경되면 다른 모든 컴포넌트가 영향을 받을 가능성이 높다.
* 개발자가 공통 레이어, 로컬 레이어 양쪽에 도메인 개념을 복제해야 할 수도 있다.
* 일반적으로 데이터 레벨의 커플링이 높다. 이런 시스템은 대개 애플리케이션 아키텍트, 데이터 아키텍트가 서로 협력하여 단일 데이터베이스를 구성하고 여기에 각종 도메인을 포함시키기 때문에 나중에 아키텍트가 분산 시스템으로 아키텍처를 옮기려고 할 경우 데이터 관계를 파헤치는 작업이 어렵다.

## 8.3 개발자 역할

개발자는 아키텍트와 공통 설계한 컴포넌트를 바탕으로 클래스, 함수, 서브컴포넌트로 더 잘게 나눕니다.
