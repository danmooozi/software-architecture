# CHAPTER 5 아키텍처 특성 식별

> 주어진 문제 영역이나 애플리케이션에서 아키텍처 특성을 정확하게 식별하기 위해 아키텍트는 해당 도메인을 잘 이해하고 있어야 하며, 도메인 이해관계자들과 협력하여 도메인 관점에서 정말 중요한 것들을 결정해야 함.
> 아키텍트는 적어도 관심사, 요구사항, 암묵적 도메인 지식, 이렇게 세 가지 출처에서 아키텍처 특성을 밝혀냄
> 관심사, 요구사항 두 방법을 살펴본다.

## 5.1 도메인 관심사에서 아키텍처 특성 도출

도메인 이해관계자와 협력해서 주요 아키텍처 특성을 정의하는 한가지 팁

- 최종 목록을 가능한 한 짧게 하기
  너무 많은 아키텍처 특성을 수용하면 아키텍트, 개발자가 당초 의도했던 문제 영역의 해결을 시도하기도 전에 아키텍처가 너무 복잡해져버림
  아키텍처 특성의 개수에 연연하지 말고 가급적 설계를 단순화하는게 좋음

사례 연구: 바사

일반적으로 아키텍트와 도메인 이해관계자는 시스템이나 애플리케이션이 지원해야 할 아키텍처 특성 최종 목록에 우선 순위를 두는 경향이 있음. 모든 아키텍처 특성의 우선 순위에 만장일치로 의견이 모아지는 경우는 거의없음

→ (순서를 무작위로 섞은) 최종 목록을 주고 각자 가장 중요한 특성 3개를 뽑으라고 하는 것이 좋은 방법
자연스럽게 합의를 이끌어내기 쉽고 가장 중요한 것이 무엇일까 좀 더 논의하게 되며, 아키텍트가 중요한 아키텍처 결정을 내리기 전에 트레이드오프를 분석하는 데에도 도움이 됨

대부분의 아키텍처 특성은 핵심 도메인 이해관계잘들의 의견을 듣고 도메인 관점에서 무엇이 중요한지 의견을 교환하면서 정리됨.

이 과정에서 아키텍트와 도메인 이해관계자들이 서로 다른 언어로 말을 한다는게 문제

아키텍트는 고객 만족을 지원하기 위해 아키텍처를 어떻게 구축해야 할지 전혀 모르고, 도메인 담당자는 애플리케이션을 개발하는데 가용성, 상호운용성, 학습성, 내고장성 같은 것들을 왜 고민해야 하는지 답답함

→ 도메인 관심사를 아키텍처 특성으로 옮겨야 함.

일반적인 도메인 관심사와 이를 뒷받침하는 아키텍처 특성을 정리한 표

## 5.2 요구사항에서 아키텍처 특성 도출

요구사항 정의서에서 명시된 문장에서 도출한 아키텍처 특성도 있음

예) 예상 유저 수와 그에 따른 확장 문제

**아키텍처 카타의 유래**

아키텍처 카타는 원래 목적에 맞게, 야심 만만한 아키텍트의 유용한 실험실 역할을 함

각 카타에 미리 정의된 섹션들

- 설명: 시스템으로 해결하려는 전체 도메인 문제
- 유저: 시스템을 사용할 것으로 예상되는 유저의 유형과 인원수
- 요구사항: 아키텍트가 도메인 유저 및 도메인 전문가의 말을 듣고 예상하는 도메인/도메인 수준의 요구사항
- 부가 콘텍스트: 요구사항만에는 명확하게 기술되어 있지 않지만 아키텍트가 암묵적인 문제 영역에 관한 지식을 이용해 반드시 고려해야 할 여러 가지 항목들.

## 5.3 사례 연구: 실리콘 샌드위치

실리콘 샌드위치 카타를 예로 들어 아키텍트가 요구사항을 바탕으로 아키텍처 특성을 도출하는 방법을 알아보자

**시나리오**

**설명**

- 실리콘 샌드위치는 전국 가맹점을 보유한 샌드위치 브랜드로, （현재의 매장 서비스와 병행하여 ） 온라인 주문 시스템을 구축하려고 한다

**유저**

- 앞으로 수천 명, 어쩌면 수백만 명에 달할 지도 모른다

**요구사항**

- 유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 전달받는다（교통 정보가
  포함된 여러 외부 지도 서비스와의 연계는 필수임）
- 배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다
- 모바일 기기에서도 이용 가능하다
- 전국 어느 지점이나 이용 가능한 프로모션/스페셜 행사를 제공한다
- 특정 지점에서만 이용 가능한 로컬 프로모션/스페셜 행사를 제공한다
- 온라인 결제, 대면 결제, 배송 시 결제 등 다양한 결제 옵션을 제공한다

**부가 콘텍스트**

- 샌드위치 지점은 가맹점이므로 소유자가 다 다르다
- 모회사는 머지않아 해외 시장도 진출할 계획이다
- 이 회사는 값싼 인력을 고용해 이윤을 최대화하는 것이 목표다

→ 아키텍트의 임무는 엄청난 노력을 기울여 도메인 요구사항을 충족하는 저체 시스템을 코드 레벨로 설계하는 것이 아니라, 설계, 특히 구조와 관련이 있거나 영향을 미치는 것들을 찾아내는 것.
우선, 아키텍처 특성이 될 만한 것들을 명시적인 것과 암묵적인 것으로 분류함

### 5.3.1 명시적 특성

명시적 아키텍처 특성은 필요한 설계의 일부로서 요구사항 정의서에 기술됨.

예시에서

- 요구사항 정의서에서 아키텍처 특성을 도출할 수 있음
- 확장성 수와 성능 수도 함께 정의하는게 좋음

### 5.3.2 암묵적 특성

요구사항 정의서에 따로 없는 아키텍처 특성도 있지만 이들은 각각 중요한 설계 요소가 됨

- 가용성 - 시스템에서 마땅히 지원되어야 할 암묵적인 아키텍처 특성, 유저는 샌드위치 사이트에 접속할 수 있어야 함.
- 신뢰성 - 유저가 사이트에 방문해서 시스템을 문제없이 사용하려면 신뢰성 역시 반드시 필요함
- 보안 - 모든 시스템에 공통적인 암묵적 특성

아키텍처 특성은 서로 연관되어 움직이므로 중요도에 따라 우선순위는 달라질 수 있음

- 맞춤성 - 요구사항 곳곳에 해당되는.

> 아키텍처에서는 틀린 답은 없고 값비싼 답만 있습니다!

**설계 vs 아키텍처, 그리고 트레이드오프**

- 아키텍처는 구조적 컴포넌트를 나타내지만, 설계는 아키텍처 내부에 속함
- 아키텍처 트레이드 오프 분석
  1. 마이크로커널 아키텍처로 구현하지 않을 타당한 사유가 있는가?
  2. 이렇게 설계하면 다르게 설계할 때보다 특별히 더 구현하기 어려운 아키텍처 특성이 있나?
  3. 각 ‘설계 대 패턴’에서 모든 아키텍처 특성을 지원하려면 비용이 얼마나 들어가나?
- 아키텍트는 개발자, 프로젝트 관리자, 운영팀, 기타 소프트웨어 시스템 구축에 참여한 사람들의 협조를 구해야 함

아키텍트는 아키텍처 특성에 우선순위를 매겨 가장 단순한 필수 세트로 정리해야 함.

어떤 아키텍처 특성이 애플리케이션에 정말 필요한지 의문이라면 시스템이 성공하기 위해서 무엇이 필요한지, 무엇이 중요한지 먼저 생각해라.
