# 5장 아키텍처 특성 식별

> 아키텍처 식별

- 아키텍처를 구축하거나 기존 아키텍처의 타당성 검증할 때 제일 먼저 해야 할 일
- 아키텍트는 해당 도메인을 잘 이해하고 있어야 한다.

아키텍트는 적어도 도메인 관심사, 요구사항, 암묵적 도메인 지식, 이렇게 세 가지 출처에서 아키텍처 특성을 밝혀낸다.
> 

## 5.1 도메인 관심사에서 아키텍처 특성 도출

- 아키텍트는 도메인 관심사를 올바르게 해석 → 정확하게 아키텍처 특성을 식별
    - ex) 확장성, 내고장성, 보안, 성능 중 어느 것이 중요한 관심사?
        - 모두 필요한 특성
        - 하지만 아키텍트는 도메인의 핵심 목표 & 상황 고려 → 도메인 관심사를 ~성으로 해석한 후
        - 그에 따른 결정 필요

**지원 가능한 아키텍처 특성을 가능한 한 짧게**

- 간결성 추구
    - 아키텍처 특성 목록을 가능한 한 짧게 유지. 설계 복잡성을 줄이고 핵심에 집중
    - 지원 가능한 아키텍처 특성 하나하나가 전체 시스템 설계를 복잡하게 만드는 요인

**아키텍터 특성 선정하는 효과적인 방법**

- 기존 방식의 문제점
    - 아키텍트와 도메인 이해관계자들이 모든 아키텍처 특성에 우선순위를 매기려고 하는 경향
    - 모든 특성의 우선순위에 대해 만장일치로 합의하기는 매우 어렵다.
- 제안하는 효과적인 방법
    - 무작위 나열
    - 가장 중요하다고 생각하는 3개의 특성을 선택

**아키텍트와 도메인 이해관게자 간의 의사소통 문제와 그 해결  방안**

- 언어의 차이
    - 아키텍트와 도메인 이해관계자는 서로 다른 언어를 사용
    
    ```jsx
    아키텍트: 확장성, 상호운용성, 내고장성, 학습성, 가용성 등의 기술적 용어 사용
    도메인 이해관계자: 인수 병합, 고객 만족, 출시 시점, 경쟁 우위 등의 비즈니스 용어 사용
    ```
    
- 상호 이해의 부족
    - 이러한 언어 차이로 인해 서로의 관점을 이해하기 어려워짐
    
    ```jsx
    아키텍트: 비즈니스 요구사항을 기술적으로 어떻게 구현할지 모름
    도메인 담당자: 기술적 고려사항의 필요성을 이해하지 못함
    ```
    
- 해결 방안 : 도메인 관심사를 아키텍처 특성으로 변환
    
    
    | **도메인 관심사** | **아키텍처 특성** |
    | --- | --- |
    | 인수합병 | 상호운용성, 확장성, 적응성, 신장성 |
    | 출시 시기 | 민첩성, 시험성, 배포성 |
    | 유저만족 | 성능, 가용성, 내고장성, 시험성, 배포성, 민첩성, 보안 |
    | 경쟁 우위 | 민첩성, 시험성, 배포성, 확장성, 가용성, 내고장성 |
    | 시간 및 예산 | 단순성, 실행성 |

**도메인 관심사를 아키텍처 특성으로 해설할 때 주의해야 할 점**

- 도메인 관심사 해석의 함정
    - 단일 특성 집중의 위험: 하나의 아키텍처 특성만으로 도메인 관심사를 해결하는 것은 위험
    - 복합적 접근의 필요성 : 대부분의 도메인 관심사는 여러 아키텍처 특성의 조합으로 해결

**사례 분석: 당일 펀드 종가 계산**

- 도메인 요구사항 : 당일 펀드 종가 계산을 무슨 일이 있어도 제시간에 마감해야 한다.
- 잘못된 접근: 성능에만 집중
- 올바른 접근 : 다양한 아키텍처 특성 고려
    1. **가용성**: 필요한 시점에 시스템을 사용할 수 있어야 한다.
    2. **확장성**: 도메인 규모 증가에 대응할 수 있어야 한다.
    3. **안정성**: 펀드 종가 계산 중 시스템 중단을 방지해야 한다.
    4. **복원성**: 시스템 다운 시 마지막 계산 지점부터 재개할 수 있어야 한다.
    5. **정확성**: 빠른 계산뿐만 아니라 정확한 계산도 중요하다.

## 5.2 요구사항에서 아키텍처 특성 도출

**아키텍트의 도메인 지식이 아키텍처 설계에 얼마나 중요할까?**

1. 요구사항 도출:
    - 명시적 요구사항: 요구사항 정의서에 직접 명시된 내용 (예: 예상 사용자 수)
    - 암묵적 요구사항: 도메인 지식을 바탕으로 아키텍트가 추론해야 하는 내용
2. 도메인 지식의 중요성:
    - 아키텍트가 도메인에 대한 깊은 이해를 가지고 있으면, 명시되지 않은 중요한 요구사항을 파악할 수 있습니다.
3. 대학 수강신청 시스템 사례:
    - 표면적 요구사항: 1,000명의 학생, 각 학생당 10시간의 수강신청
    - 도메인 지식 기반 추론: 학생들의 행동 패턴 (마감 직전에 몰리는 경향)
4. 설계 결정의 차이:
    - 도메인 지식 없이: 등록 기간 동안 사용량이 균등하게 분산된다고 가정하고 설계
    - 도메인 지식 활용: 마감 10분 전에 대부분의 학생이 동시에 접속할 것을 예상하고 설계
5. 아키텍트의 역할:
    - 명시적 요구사항뿐만 아니라 도메인 특성을 고려한 암묵적 요구사항까지 파악
    - 이를 바탕으로 실제 사용 패턴에 적합한 시스템 설계

### 5.3 사례 연구: 실리콘 샌드위치

> 설명
• 실리콘 샌드위치는 전국 가맹점을 보유한 샌드위치 브랜드로, (현재의 매장 서비스와 병행하여 ) 온라 인 주문 시스템을 구축하려고 한다.
유저
• 앞으로 수천 명, 어쩌면 수백만 명에 달할 지도 모른다.
요구사항
• 유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 전달받는다(교통 정보가 포함된 여러 외부 지도 서비스와의 연계는 필수임).
• 배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다. 
• 모바일 기기에서도 이용 가능하다.
• 전국 어느 지점이나 이용 가능한 프로모션/스페셜 행사를 제공한다.
• 특정 지점에서만 이용 가능한 로컬 프로모션/스페셜 행사를 제공한다.
• 온라인 결제. 대면 결제, 배송 시 결제 등 다양한 결제 옵션을 제공한다.
부가 콘텍스트
• 샌드위치 지점은 가맹점이므로 소유자가 다 다르다.
• 모회사는 머지않아 해외 시장도 진출할 계획이다.
• 이 회사는 값싼 인력을 고용해 이윤을 최대화하는 것이 목표다.
> 

**이런 시나리오를 받은 아키텍트는 아키텍처 특성을 어떻게 도출해야 할까?**

- 도메인 요구사항을 충족하는 전체 시스템을 코드 레벨로 설계하는 것이 아니라
- 설계, 특히 구조와 관련이 있거나 영향을 미치는 것들을 찾아내는 것
- 우선, 아키텍처 특성이 될 만한 것들을 명시적인 것과 암묵적인 것으로 분류

### 5.3.1 명시적 특성

**아키텍트가 요구사항을 분석하고 아키텍터 특성을 도출하는 과정**

1. 명시적 아키텍터 특성
    - 요구사항 정의서에 직접 기술된 설계 요소.
    - 예: 쇼핑몰 사이트의 최대 동시 접속자 수
2. 도메인 레벨 기대치 고려:
    - 아키텍트는 요구사항을 분석하기 전에 도메인 수준의 기대치를 먼저 고려해야 한다.
3. 유저 수 분석:
    - 현재 수천 명에서 향후 수백만 명으로 증가 예상
    - 이는 확장성이 중요한 아키텍처 특성임을 암시.
4. 확장성(Scalability):
    - 성능 저하 없이 다수의 동시 사용자를 처리하는 능력
    - 요구사항에 명시적으로 언급되지 않았지만, 예상 사용자 수를 통해 유추할 수 있다.
5. 도메인 언어의 해석:
    - 아키텍트는 도메인 언어를 엔지니어링 언어로 해석해야 한다.
    - 예: 사용자 수 증가 예측 → 확장성 요구
6. 탄력성(Elasticity):
    - 갑작스러운 사용자 요청 증가에 대응하는 능력
    - 확장성과 밀접하게 관련되어 있지만, 서로 다른 제약 조건을 가진다.
7. 확장성과 탄력성의 관계:
    - 두 특성은 종종 함께 나타나지만, 각각 다른 측면을 다룹니다.
    - 확장성: 전체적인 시스템 용량 증가
    - 탄력성: 급격한 부하 변동에 대한 대응 능력
8. 그래프 분석:
    - [그림 5-1]은 확장성을 나타내는 그래프로, 시스템 용량과 성능의 관계를 보여준다.
    - 확장성 : 점진적으로 증가하는 부하를 처리할 수 있는 능력

        <img width="1063" alt="스크린샷 2024-10-13 오후 9 27 17" src="https://github.com/user-attachments/assets/7d38fb8c-3c75-490e-9d07-c05e911226ab">

        
    - 탄력성 : 갑작스러운 트래픽 증가에 대응할 수 있는 능력
        <img width="1077" alt="스크린샷 2024-10-13 오후 9 27 35" src="https://github.com/user-attachments/assets/0c487ed0-fc16-4512-bc5c-5a1085e8bd8a">

        
- 확장성과 탄력성은 다른 개념으로, 호텔 예약 시스템은 확장성이 좋지만 탄력성이 낮은 반면, 콘서트 티켓 예약 시스템은 높은 탄력성이 필요하다.
- 아키텍트는 요구사항 정의서에 명시되지 않은 탄력성과 같은 중요한 아키텍처 특성을 식별해야 하며, 이는 문제 영역 내에 숨겨진 요구사항일 수 있다.
- 유능한 아키텍트는 비즈니스 요구사항을 검토하면서 잠재된 아키텍처 특성을 파악하고, 시간대별 트래픽 변동과 같은 실제 사용 패턴을 고려하여 시스템을 설계해야 한다.

**샌드위치 서비스 요구사항 명세서 분석**

1. 성능의 중요성:
    - 성능은 사용자 경험에 직접적인 영향을 미치는 중요한 아키텍처 특성.
    - 특히 주문이 몰리는 시간에 시스템이 느려지면 사용자들이 이탈할 수 있다.
2. 성능의 다양한 측면:
    - 성능은 단순한 개념이 아니라 여러 가지 뉘앙스를 포함하고 있다.
    - 아키텍트는 시스템에 적합한 특정 유형의 성능을 식별하고 설계에 반영해야 한다.
3. 확장성 수와 성능 수의 정의:
    - 성능의 기준선을 먼저 설정하는 것이 중요하다.
    - 특정 사용자 수(확장성 수)에 대해 어느 정도의 성능(성능 수)이 수용 가능한지 정의해야 한다.
4. 아키텍처 특성 간의 상호 영향:
    - 대부분의 아키텍처 특성은 서로 영향을 미친다.
    - 아키텍트는 이러한 상호 관계를 고려하여 아키텍처 특성을 상대적으로 정의해야 한다.

### 5.3.2 암묵적 특성

- 요구사항 정의서에 명시되지 않은 암묵적 아키텍처 특성(가용성, 신뢰성, 보안 등)도 중요한 설계 요소이며, 아키텍트는 이들의 중요도와 상호 관계를 고려하여 우선순위를 결정해야 한다.
- 아키텍트는 특정 아키텍처 특성을 과도하게 적용하거나(over-engineering) 부족하게 적용하는(under-engineering) 함정을 피해야 하며, 시스템의 복잡성과 실제 요구사항 사이의 균형을 찾아야 한다.
- 맞춤성(customizability)은 실리콘 샌드위치 시스템의 중요한 아키텍처 특성 중 하나로, 아키텍트는 이를 지원하는 구조를 설계해야 하지만, 아키텍처 특성 선택에 있어 절대적인 정답은 없으며 상황에 따른 최적의 선택이 중요하다.

**아키텍처 특성을 선택하고 우선순위를 정하는 방법**

1. 아키텍트는 가장 중요한 아키텍처 특성만을 선별하여 단순하고 필수적인 세트로 정리해야 하며, 팀원들과 함께 덜 중요한 특성을 제거하는 과정을 통해 우선순위를 정할 수 있다.
2. 아키텍처에는 '최고의 설계'가 없고 오직 '나쁜 것 중에서 제일 나은 트레이드오프'만 있으므로, 아키텍트는 시스템의 성공에 정말 필요한 특성이 무엇인지 고민하고 선택해야 한다.
3. 실리콘 샌드위치 사례에서는 맞춤성과 성능 중 하나를 포기해야 할 수 있으며, 성능보다는 확장성이나 가용성 같은 다른 운영 특성을 우선시하는 것이 더 중요할 수 있다.
