# 아키텍처 특성 식별

아키텍처를 구축하거나 검증할 때 첫 단계는 아키텍처 특성을 식별하는 것입니다.  
이를 위해 아키텍트는 해당 도메인을 깊이 이해하고, 도메인 이해관계자들과 협력하여 중요한 요소들을 결정해야 합니다.  
아키텍처 특성은 도메인 관심사, 요구사항, 암묵적 도메인 지식에서 도출됩니다.

## 도메인 관심사에서 아키텍처 특성 도출

아키텍트는 도메인에서 가장 중요한 관심사를 파악하여, 확장성, 내고장성, 보안, 성능 등의 아키텍처 특성들 중 어떤 특성이 핵심인지 식별해야 합니다.  
도메인 이해관계자와 협력하여 도메인의 목표와 상황에 기반하여 아키텍처 특성을 추출하고, 이에 따라 아키텍처 결정을 내려야 합니다.  
이 때 주요 아키텍처 특성을 정의할 때는 목록을 짧게 유지하는 것이 좋습니다.  
모든 아키텍처 특성을 고려한 제네릭 아키텍처는 복잡성을 초래하기 때문에, 설계를 단순화하는 것이 최선입니다.

아키텍트와 도메인 이해관계자는 시스템이 지원해야 할 아키텍처 특성에 대해 우선순위를 정하려고 하는 경우가 많은데, 만장일치로 의견이 모아지는 경우는 거의 없습니다.  
따라서 최종 목록에서 각자 가장 중요한 3개 특성을 선택하도록 하는 것이 합의를 이끌어내는 좋은 방법입니다.  
이 과정에서 트레이드오프 분석도 수월해집니다.

아키텍트와 도메인 이해관계자는 서로 다른 언어를 사용해 의사소통의 어려움이 발생합니다.  
아키텍트는 기술적 특성(확장성, 가용성 등)으로 소통하지만, 도메인 이해관계자는 비즈니스 목표(고객 만족, 출시 시점 등)로 소통합니다.  
이로 인해 양측은 서로의 요구를 제대로 이해하지 못하고 갈등이 발생합니다.

따라서 도메인 관심사를 아키텍처 특성으로 변환하는 과정이 중요합니다.  
다음은 도메인 관심사와 아키텍처 특성을 매핑한 목록입니다.

1. **인수 합병**: 상호운용성, 확장성, 적응성, 신장성
2. **출시 시기**: 민첩성, 시험성, 배포성
3. **유저 만족**: 성능, 가용성, 내고장성, 시험성, 배포성, 민첩성, 보안
4. **경쟁 우위**: 민첩성, 시험성, 배포성, 확장성, 가용성, 내고장성
5. **시간 및 예산**: 단순성, 실행성

아키텍트가 도메인 관심사를 해석할 때, 일부 아키텍처 특성에만 집중하면 전체적인 요구사항을 충족하지 못할 수 있습니다.  
예를 들어, 펀드 종가 마감 시간 준수가 중요한 요구사항이라고 할 때, 성능에만 집중하면 실패할 수 있습니다.  
시스템이 필요한 시점에 사용 가능해야 하며, 확장 가능해야 하고, 시스템 중단 시에도 빠르게 복구할 수 있어야 하기 때문에 가용성, 확장성, 신뢰성, 복원성, 정확성 등 다양한 아키텍처 특성이 함께 고려되어야 합니다.

아키텍트는 요구사항 정의서에 명시된 내용뿐만 아니라 자신의 도메인 지식을 바탕으로 아키텍처 특성을 도출할 수도 있어야 합니다.  
예상 유저 수와 확장성 같은 문제는 요구사항 정의서에도 자주 등장하지만, 명확히 명시되지 않은 사용자 습관이나 행동 패턴도 중요합니다.  
예를 들어 수강 등록 처리 시스템을 설계할 때, 대부분의 학생들이 마감 직전에 몰린다는 점을 고려해 시스템을 설계해야 합니다.

## 사례 연구: 실리콘 샌드위치

### 명시적 특성

아키텍트는 요구사항 정의서에서 명시된 아키텍처 특성을 검토할 때, 도메인의 기대치를 먼저 고려해야 합니다.  
예를 들어, 유저 수가 수천 명에서 수백만 명으로 늘어날 가능성이 있다면 확장성이 중요한 아키텍처 특성입니다.  
요구사항에 명확히 확장성이 언급되지 않더라도, 예상 유저 수를 통해 이것이 중요한 특성임을 파악할 수 있습니다.

또한, 유저 요청이 순간적으로 폭증할 수 있는 상황을 대비하기 위해 탄력성도 필요합니다.  
확장성과 탄력성은 함께 작용하는 경우가 많지만, 제약 조건은 다를 수 있습니다.  
아키텍트는 이러한 특성들을 도메인 언어를 기술적 언어로 해석해 설계에 반영해야 합니다.  
예를 들어, 호텔 예약 시스템은 일정한 트래픽을 유지하기 때문에 확장성은 있지만 탄력성이 부족해도 시스템이 작동할 수 있습니다.  
하지만 콘서트 티켓 예약 시스템은 티켓 발매 시 폭발적인 트래픽 증가가 발생하기 때문에, 탄력성이 없으면 시스템이 이를 감당하지 못합니다.

비록 요구사항 정의서에 탄력성이 명시되지 않더라도, 아키텍트는 상황에 따라 이를 중요한 특성으로 고려해야 합니다.  
예시로 살펴보고 있는 샌드위치 가게 시스템의 경우 식사 시간에 트래픽이 급증할 수 있음을 파악하고, 잠재된 아키텍처 특성으로 탄력성을 추출하고 설계에 반영해야 합니다.

1. **유저가 주문을 하면 샌드위치를 픽업하러 갈 시간 및 상점까지 가는 경로를 안내받는다(교통 정보가 포함된 여러 외부 자도 서비스와의 연계는 필수적임)**  
   외부 지도 서비스와 같은 서드 파티에 연계된 시스템은 서드파티 의존성으로 인해 신뢰성에 영향을 받을 수 있습니다. 서비스가 잘못 설계된 경우 서드 파티 서비스가 다운되었을 때 전체 시스템 안정성에 타격을 줄 수 있습니다. 아키텍트는 이러한 상황을 대비해 설계가 불필요한 불안정성이나 취약점을 내제하지 않도록 주의해야 합니다.

2. **배달 서비스가 가능한 지점은 기사를 보내 샌드위치를 유저에게 배달한다**  
   별도의 복잡한 아키텍처 특성은 필요하지 않습니다.

3. **모바일 기기에서도 이용 가능하다**  
   이 요구사항은 이식성 좋은 웹 애플리케이션과 네이티브 애플리케이션 중 선택을 하는 중요한 결정 요소입니다. 예산과 복잡성을 고려해 모바일에 최적화된 웹 애플리케이션 개발로 결정하고, 이에 맞춰 페이지 로딩 시간 또는 모바일 환경에서 민감한 아키텍처 특성을 정의할 수 있습니다. 아키텍트는 UX 설계자 및 도메인 이해관계자들과 협의하여 결정을 내려야 합니다.

4. **전국 어느 지점이나 이용 가능한 프로모션/스페셜 행사를 제공한다**

5. **특정 지점에서만 이용 가능한 로컬 프로모션/스페셜 행사를 제공한다**  
   4, 5번 요구사항은 프로모션과 스페셜 행사에 관한 커스터마이징 가능 여부를 다룹니다. 유저 주소 정보에 기반한 교통 정보 커스터마이징을 요구한 1번 요구사항과 함께 맞춤성(customizability)을 아키텍처 특성으로 도출할 수 있습니다. 마이크로커널 아키텍처처럼 플러그인을 통해 유저가 원하는 위치 기반 맞춤 동작을 지원할 수 있으며, 템플릿 메서드 패턴을 활용해도 구현 가능합니다. 다양한 설계 방안 간의 트레이드오프를 신중히 고려하여 선택해야 합니다.

6. **온라인 결제, 대면 결제, 배송 시 결제 등 다양한 결제 옵션을 제공한다.**  
   온라인 결제는 보안이 필요하지만, 이 요구사항만으로는 어느 정도의 보안 수준이 필요한지 명확하지 않습니다.

7. **샌드위치 지점은 가맹점이므로 소유자가 다 다르다.**  
   가맹점 형태의 운영은 아키텍처 비용에 제약을 가하며, 아키텍트는 단순한 아키텍처로도 충분한지 타당성을 미리 확인해야 합니다.

8. **모회사는 머지않아 해외 시장도 진출할 계획이다.**  
   해외 시장 진출 계획이 있으므로 국제화(internationalization)가 필요하며, 이는 설계 결정에 영향을 미칠 수 있습니다.

9. **이 회사는 값싼 인력을 고용해 이윤을 최대화하는 것이 목표다.**  
   이 요구사항은 사용성과 관련이 있지만, 아키텍처보다는 설계와 더 밀접한 관계가 있습니다.

요구사항 정의서에서 도출한 세 번째 아키텍처 특성은 **성능**입니다. 성능이 떨어지면 주문이 몰리는 시간에 접속이 느려질 수 있으며, 이는 사용자 경험에 부정적인 영향을 줍니다. 아키텍트는 설계에서 어떤 성능을 고려해야 할지 고민해야 합니다.

또한 **확장성**과 **성능 지표**를 함께 정의하는 것이 중요합니다. 성능의 기준을 정하고, 특정 수의 유저가 접속할 때 어느 정도의 성능이 나와야 수용 가능한지 판단해야 합니다. 확장성과 성능처럼 대부분의 아키텍처 특성은 서로 영향을 주므로, 아키텍트는 특성들을 상대적으로 정의할 필요가 있습니다.

### 5.3.2 암묵적 특성

요구사항 정의서에 따로 없는 아키텍처 특성도 있지만, 이들은 중요한 설계 요소로 작용합니다.

- **가용성**은 시스템이 유저에게 항상 접속 가능해야 한다는 암묵적인 아키텍처 특성입니다. 유저가 사이트에 방문해 문제없이 사용할 수 있어야 합니다.
- **신뢰성**은 필수적인 요소로, 접속이 자꾸 끊기면 유저는 다시 로그인하고 싶지 않을 것입니다.
- **보안**은 모든 시스템에 공통적으로 요구되는 특성입니다. 안전하지 않은 소프트웨어는 원하지 않으며, 보안은 시스템 구조에 중대한 영향을 미칠 수 있습니다. 아키텍트는 보안이 중요한 요소라면 이를 아키텍처 특성으로 간주해야 합니다.

  - 실리콘 샌드위치의 경우, 결제 처리는 서드파티 업체가 전담하므로 상식적인 보안 지침만 준수하면 특별한 구조적 설계는 필요 없습니다. 하지만 아키텍트는 지나치게 특정 아키텍처 특성을 적용하지 않도록 주의해야 하며, 그렇지 않으면 시스템이 지나치게 복잡해져 오히려 해를 끼칠 수 있습니다.

- **맞춤성** 또한 암묵적으로 요구됩니다. 유저가 레시피, 로컬 판매, 약도 등 다양한 부분을 자신의 의도에 맞게 커스터마이징할 수 있어야 하므로, 이를 지원하는 아키텍처가 필요합니다. 이는 애플리케이션 설계의 범주에 속하지만, 커스터마이징된 구조가 필요한 경우 아키텍처 특성의 영역으로 옮길 수 있습니다.

아키텍처 특성 선택에는 정답이 없으며, 잘못된 선택만 있을 뿐이라는 점을 명심해야 합니다. **“아키텍처에서는 틀린 답은 없고 값비싼 답만 있습니다!”**

아키텍트는 애플리케이션에서 커스텀 로직을 지원하는 맞춤성을 아키텍처 설계에 반영하지 않을 수도 있습니다. 물론 중요한 구조적 요소를 식별하면 더 단순하고 우아한 설계가 가능할 것이지만, 개발자는 다양한 방법으로 기능을 구현할 수 있으므로 아키텍트는 아키텍처 특성을 발견하는 데 너무 스트레스를 받을 필요가 없습니다. 완벽한 설계는 없고 최선의 트레이드오프만 있을 뿐입니다.

아키텍트는 아키텍처 특성의 우선순위를 매기고 필수적인 세트를 정리해야 합니다. 아키텍처 특성을 식별한 후 덜 중요한 특성을 제거하는 것도 도움이 됩니다. 실리콘 샌드위치의 경우, 맞춤성과 성능 중 하나를 포기해야 한다면, 성능이 덜 중요한 특성으로 간주될 수 있습니다. 이는 성능이 중요하지 않다는 뜻이 아니라, 확장성이나 가용성보다 우선시하지 않는다는 의미입니다.
